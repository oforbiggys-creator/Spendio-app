<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spendio</title>

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      background: linear-gradient(180deg, #001f2d, #00364d);
      color: white;
    }

    .container {
      max-width: 420px;
      margin: auto;
      padding: 20px;
    }

    h1 {
      margin-bottom: 5px;
    }

    .tagline {
      opacity: 0.7;
      margin-bottom: 20px;
    }

    .card {
      background: #012c3d;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 15px;
    }

    input {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      border: none;
      margin-bottom: 12px;
      font-size: 16px;
    }

    button {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      border: none;
      font-size: 16px;
      cursor: pointer;
      margin-bottom: 10px;
    }

    .primary {
      background: #00eaff;
      color: #002b3b;
      font-weight: bold;
    }

    .outline {
      background: transparent;
      border: 2px solid #00eaff;
      color: #00eaff;
    }

    .danger {
      background: #ff4d4d;
      color: white;
    }

    .hidden {
      display: none;
    }

    .transaction {
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding: 10px 0;
      font-size: 14px;
    }

    .success {
      color: #00ff9c;
    }

    .error {
      color: #ff6b6b;
    }
  </style>
</head>

<body>

<div class="container">

  <!-- HEADER -->
  <h1>Spendio</h1>
  <div class="tagline">Smart finance for Africa</div>

  <!-- DASHBOARD -->
  <div id="dashboard" class="card">
    <button class="danger" onclick="resetWallet()">Logout</button>

    <h3>Wallet Balance</h3>
    <h2 id="balance">₦0.00</h2>

    <button class="primary" onclick="openSend()">Send Money</button>
    <button class="primary" onclick="receiveMoney()">Receive Money</button>
  </div>

  <!-- SEND MONEY -->
  <div id="sendScreen" class="card hidden">
    <h3>Send Money</h3>

    <input type="number" id="sendAmount" placeholder="Amount (₦)">
    <input type="text" id="recipient" placeholder="Recipient name">

    <button class="primary" onclick="sendMoney()">Send</button>
    <button class="outline" onclick="goBack()">Back</button>

    <p id="sendMessage"></p>
  </div>

  <!-- TRANSACTIONS -->
  <div class="card">
    <h3>Transactions</h3>
    <div id="transactions"></div>
  </div>

</div>

<script>
  let balance = parseFloat(localStorage.getItem("balance")) || 0;
  let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

  function updateUI() {
    document.getElementById("balance").innerText = "₦" + balance.toFixed(2);
    const txDiv = document.getElementById("transactions");
    txDiv.innerHTML = "";

    if (transactions.length === 0) {
      txDiv.innerHTML = "<p>No transactions yet</p>";
      return;
    }

    transactions.slice().reverse().forEach(tx => {
      const div = document.createElement("div");
      div.className = "transaction";
      div.innerHTML = `
        <strong>${tx.type}</strong> ₦${tx.amount}<br>
        <small>${tx.note}</small>
      `;
      txDiv.appendChild(div);
    });
  }

  function openSend() {
    document.getElementById("dashboard").classList.add("hidden");
    document.getElementById("sendScreen").classList.remove("hidden");
  }

  function goBack() {
    document.getElementById("sendScreen").classList.add("hidden");
    document.getElementById("dashboard").classList.remove("hidden");
  }

  function sendMoney() {
    const amount = parseFloat(document.getElementById("sendAmount").value);
    const recipient = document.getElementById("recipient").value;
    const msg = document.getElementById("sendMessage");

    msg.innerText = "";

    if (!amount || amount <= 0 || !recipient) {
      msg.innerText = "Invalid input";
      msg.className = "error";
      return;
    }

    if (amount > balance) {
      msg.innerText = "Insufficient balance";
      msg.className = "error";
      return;
    }

    balance -= amount;

    transactions.push({
      type: "Sent",
      amount,
      note: "To " + recipient
    });

    saveData();
    updateUI();

    msg.innerText = "Transfer successful";
    msg.className = "success";

    document.getElementById("sendAmount").value = "";
    document.getElementById("recipient").value = "";
  }

  function receiveMoney() {
    const amount = prompt("Enter amount to receive");

    if (!amount || amount <= 0) return;

    balance += parseFloat(amount);

    transactions.push({
      type: "Received",
      amount,
      note: "Wallet funding"
    });

    saveData();
    updateUI();
  }

  function saveData() {
    localStorage.setItem("balance", balance);
    localStorage.setItem("transactions", JSON.stringify(transactions));
  }

  function resetWallet() {
    if (!confirm("Logout and reset wallet?")) return;
    localStorage.clear();
    balance = 0;
    transactions = [];
    updateUI();
  }

  updateUI();
</script>

</body>
</html>
